[Unit]
Description=My Python Application
After=network.target pigpio.service
Wants=pigpio.service

[Service]
User=pi
Group=pi
WorkingDirectory=/path/to/my_python_app
ExecStartPre=/bin/systemctl restart pigpio
ExecStart=/bin/bash -c 'source .venv/bin/activate; python -u main.py'
Restart=always
RestartSec=3

[Install]
WantedBy=multi-user.target
